<h3>File: {{.FilePath}}</h3>
<p><strong>Size:</strong> {{formatBytes .SizeBytes}}</p>
{{if .Error}}
<div class="alert alert-danger">
    <strong>Error:</strong> {{.Error}}
</div>
{{end}}

{{if .Snapshot}}
<div class="card" style="margin-bottom: 20px;">
    <h3>Raft Snapshot Header</h3>
    <div class="stat-row">
        <span class="stat-label">Last Included Index</span>
        <span class="stat-value">{{.Snapshot.LastIncludedIndex}}</span>
    </div>
    <div class="stat-row">
        <span class="stat-label">Last Included Term</span>
        <span class="stat-value">{{.Snapshot.LastIncludedTerm}}</span>
    </div>
    <div class="stat-row">
        <span class="stat-label">Metadata Size</span>
        <span class="stat-value">{{.Snapshot.MetadataSize}} bytes</span>
    </div>
    <div class="stat-row">
        <span class="stat-label">Version</span>
        <span class="stat-value">{{.Snapshot.HeaderVersion}}</span>
    </div>
    <div class="stat-row">
        <span class="stat-label">Header CRC</span>
        <span class="stat-value" style="font-family: monospace;">{{printf "%x" .Snapshot.HeaderCRC}}</span>
    </div>
</div>
{{else}}
<p>Found {{len .Batches}} batches.</p>

<table class="sortable-table">
    <thead>
        <tr>
            <th>Offset (Base/Max)</th>
            <th>Timestamp (Max)</th>
            <th>Type</th>
            <th>Batch Size</th>
            <th>Records</th>
            <th>Compress</th>
            <th>CRC</th>
        </tr>
    </thead>
    <tbody>
        {{range .Batches}}
        <tr>
            <td style="font-family: monospace;">{{.BaseOffset}} / {{.MaxOffset}}</td>
            <td>{{.Timestamp.Format "2006-01-02 15:04:05.000"}}</td>
            <td>
                {{.TypeString}}
                {{if .RaftConfig}}
                <div style="font-size: 0.8em; color: var(--text-color-light); margin-top: 4px;">
                    <strong>Nodes:</strong> {{range .RaftConfig.Voters}}{{.}}, {{end}}
                </div>
                {{end}}
            </td>
            <td>{{.BatchLength}}</td>
            <td>{{.RecordCount}}</td>
            <td>{{.CompressionType}}</td>
            <td style="font-family: monospace;">{{printf "%x" .CRC}}</td>
        </tr>
        {{end}}
    </tbody>
</table>
{{end}}
